var vvRestApi;(function(n){var i=function(){function n(n){var i=require("./config.yml");this._httpHelper=new t.httpHelper(n,i),this.email=new u.emailManager(this._httpHelper),this.forms=new f.formsManager(this._httpHelper),this.groups=new e.groupsManager(this._httpHelper),this.library=new o.libraryManager(this._httpHelper),this.sites=new s.sitesManager(this._httpHelper),this.users=new h.usersManager(this._httpHelper)}return n.prototype.endsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1},n.prototype.acquireSecurityToken=function(){return this._httpHelper.acquireSecurityToken()},n.prototype.getSecurityToken=function(){return this._httpHelper._sessionToken.tokenBase64},n.prototype.isAuthenticated=function(){return this._httpHelper._sessionToken.isAuthenticated},n.prototype.getBaseUrl=function(){return this._httpHelper._sessionToken.baseUrl},n}(),r,t,u,f,e,o,s,h;n.vvClient=i,r=function(){function n(){this.HTTP=require("http"),this.jsyaml=require("js-yaml"),this.nodeJsRequest=require("request"),this.Q=require("q")}return n.prototype.getVaultApi=function(n,t,i,r,u,f){var e=require("./config.yml"),o,s;return this.endsWith(r,"/")&&(r=r.substring(0,r.length-1)),o=e.ApiUri.replace("{custalias}",u).replace("{custdbalias}",f),s=e.AutheticateUri.replace("{custalias}",u).replace("{custdbalias}",f),this.acquireSecurityToken(n,t,i,r,o,u,f,s)},n.prototype.acquireSecurityToken=function(n,r,u,f,e,o,s,h){var l=this,c=this.Q.defer();return this.Q.when(this.__getToken(n,r,u,f,o,s,h,!0)).then(function(l){var v,a;console.log("acquireSecurityToken Success"),v=null,typeof l!="undefined"&&l!=null&&(a=new t.sessionToken,a.baseUrl=f,a.apiUrl=e,a.loginToken=n,a.authenticationUrl=h,a.customerAlias=o,a.databaseAlias=s,a.developerId=r,a.developerSecret=u,a.isAuthenticated=!0,a.tokenType=0,a.expirationDateUtc=l.expirationDateUtc,a.tokenBase64=l.tokenBase64,v=new i(a)),c.resolve(v)}).fail(function(n){console.log("acquireSecurityToken Failed"),c.reject(new Error(n))}),c.promise},n.prototype.endsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1},n.prototype.__getToken=function(n,i,r,u,f,e,o){var rt=this,h=this.Q.defer(),p=new Buffer(r,"base64"),w=new Date,b=parseInt((w.getTime()/1e3).toString()),l=new Date,a,c,s,y;l.setMinutes(l.getMinutes()+30),a=parseInt((l.getTime()/1e3).toString()),c=new Date,c.setMinutes(c.getMinutes()-5);var k=parseInt((c.getTime()/1e3).toString()),d={iss:"self:user",devid:i,prn:n,aud:"http://VisualVault/api",exp:a,nbf:k,iat:b},g=new t.jwt,nt=g.encode(d,p,"HS256"),tt=function(n,i,r){var u=new t.sessionToken,f;return n?(u.isAuthenticated=!1,console.log("Error from acquiring token: "+n),h.reject(new Error(n))):i.statusCode==200?(f=JSON.parse(r),u.tokenBase64=f.data.token,u.expirationDateUtc=new Date(f.data.expires),u.isAuthenticated=!0,h.resolve(u)):i.statusCode==401||i.statusCode==403?(u.isAuthenticated=!1,console.log("Authorization has been refused for current credentials"),h.reject(new Error("Authorization has been refused for current credentials"))):(u.isAuthenticated=!1,console.log("Unknown response for access token"),h.reject(new Error("Unknown response for access token"))),u},it=u+o,v={};return v.Authorization="Bearer "+nt,s={method:"GET",uri:it,qs:null,headers:v,json:null},y=new t.requestSigning,y.sign(s.headers,s.uri,s.qs,s.method,s.json,i,r),this.nodeJsRequest(s,function(n,t,i){tt(n,t,i)}),h.promise},n}(),n.authorize=r,function(t){var o=function(){function i(n,t){this.HTTP=require("http"),this.jsyaml=require("js-yaml"),this.nodeJsRequest=require("request"),this.Q=require("q"),this._sessionToken=n,this._config=t}return i.prototype.acquireSecurityToken=function(){var r=this,t=this.Q.defer(),i=new n.authorize;return this.Q.when(i.acquireSecurityToken(this._sessionToken.loginToken,this._sessionToken.developerId,this._sessionToken.developerSecret,this._sessionToken.baseUrl,this._sessionToken.apiUrl,this._sessionToken.customerAlias,this._sessionToken.databaseAlias,this._sessionToken.authenticationUrl)).then(function(n){console.log("acquireSecurityToken Success"),t.resolve(n)}).fail(function(n){console.log("acquireSecurityToken Failed"),t.reject(new Error(n))}),t.promise},i.prototype.request=function(n,t,i,r){var u={method:""};return u.method=n.toLowerCase()==="post"?"POST":n.toLowerCase()==="put"?"PUT":n.toLowerCase()==="delete"?"DELETE":"GET",this.doVvClientRequest(t,u,i,r)},i.prototype.sortParams=function(n){return n},i.prototype.httpGet=function(n,i,r){var e=this,u,f;i=this.sortParams(i),u={method:"GET",uri:n,qs:i||{},headers:{},json:null},this._sessionToken.tokenBase64==null?this.__acquireNewTokenWithRequest(u,r):(u.qs.token=this._sessionToken.tokenBase64,f=new t.requestSigning,f.sign(u.headers,u.uri,u.qs,u.method,u.json,this._sessionToken.developerId,this._sessionToken.developerSecret),console.log("Performing GET request to url:"+n),this.nodeJsRequest(u,function(n,t,i){r(n,t,i)}))},i.prototype.httpPost=function(n,i,r,u){var o=this,f,e;i=this.sortParams(i),f={method:"POST",uri:n,qs:i||{},json:r,headers:{}},this._sessionToken.tokenBase64==null?this.__acquireNewTokenWithRequest(f,u):(f.qs.token=this._sessionToken.tokenBase64,e=new t.requestSigning,e.sign(f.headers,f.uri,f.qs,f.method,f.json,this._sessionToken.developerId,this._sessionToken.developerSecret),console.log("Performing POST request to url:"+n),this.nodeJsRequest(f,function(n,t,i){u(n,t,i)}))},i.prototype.httpPut=function(n,i,r,u){var o=this,f,e;i=this.sortParams(i),f={method:"PUT",uri:n,qs:i||{},json:r,headers:{}},this._sessionToken.tokenBase64==null?this.__acquireNewTokenWithRequest(f,u):(f.qs.token=this._sessionToken.tokenBase64,e=new t.requestSigning,e.sign(f.headers,f.uri,f.qs,f.method,f.json,this._sessionToken.developerId,this._sessionToken.developerSecret),console.log("Performing PUT request to url:"+n),this.nodeJsRequest(f,function(n,t,i){u(n,t,i)}))},i.prototype.httpDelete=function(n,i,r){var e=this,u,f;i=this.sortParams(i),u={method:"DELETE",uri:n,qs:i||{},json:null,headers:{}},this._sessionToken.tokenBase64==null?this.__acquireNewTokenWithRequest(u,r):(u.qs.token=this._sessionToken.tokenBase64,f=new t.requestSigning,f.sign(u.headers,u.uri,u.qs,u.method,u.json,this._sessionToken.developerId,this._sessionToken.developerSecret),console.log("Performing DELETE request to url:"+n),this.nodeJsRequest(u,function(n,t,i){r(n,t,i)}))},i.prototype.__acquireNewTokenWithRequest=function(i,r){var u=0,f=new n.authorize;this.Q.when(f.acquireSecurityToken(this._sessionToken.loginToken,this._sessionToken.developerId,this._sessionToken.developerSecret,this._sessionToken.baseUrl,this._sessionToken.apiUrl,this._sessionToken.customerAlias,this._sessionToken.databaseAlias,this._sessionToken.authenticationUrl)).then(function(n){var f=n,u;i.qs.token=f.tokenBase64,u=new t.requestSigning,u.sign(i.headers,i.uri,i.qs,i.method,i.json,this._sessionToken.developerId,this._sessionToken.developerSecret),this.nodeJsRequest(i,function(n,t,i){r(n,t,i)})}).fail(function(){u++,this.__recursiveAttemptAcquireToken(i,r,u)})},i.prototype.__recursiveAttemptAcquireToken=function(i,r,u){var f=new n.authorize;this.Q.when(f.acquireSecurityToken(this._sessionToken.loginToken,this._sessionToken.developerId,this._sessionToken.developerSecret,this._sessionToken.baseUrl,this._sessionToken.apiUrl,this._sessionToken.customerAlias,this._sessionToken.databaseAlias,this._sessionToken.authenticationUrl)).then(function(n){var f=n,u;i.qs.token=f.tokenBase64,u=new t.requestSigning,u.sign(i.headers,i.uri,i.qs,i.method,i.json,this._sessionToken.developerId,this._sessionToken.developerSecret),this.nodeJsRequest(i,function(n,t,i){r(n,t,i)})}).fail(function(){u<6&&(u++,this.__recursiveAttemptAcquireToken(i,r,u))})},i.prototype.doVvClientRequest=function(n,t,i,r){var e=this,u=this.Q.defer(),f=function(n,t,i){if(n)console.log("In vvClientRequestCallback with error condition"),u.reject(new Error(n));else if(t.statusCode===403){e._sessionToken.tokenBase64=null,e._sessionToken.isAuthenticated=!1;var r=JSON.parse(i);u.reject(new Error(r.meta))}else console.log("In vvClientRequestCallback with success: "+i),u.resolve(i)};if(t.method==="GET")this.httpGet(n,i,f);else if(t.method==="POST")this.httpPost(n,i,r,f);else if(t.method==="PUT")this.httpPut(n,i,r,f);else if(t.method==="DELETE")this.httpDelete(n,i,f);else throw new Error("http request method name error");return u.promise},i.prototype.getUrl=function(n){return this._sessionToken.baseUrl+this._sessionToken.apiUrl+n},i}(),i,r,u,f,e,s;t.httpHelper=o,i=function(){function n(){this.crypto=require("crypto")}return n.prototype.decode=function(n,t,i){var r,u,f;if(i=typeof i=="undefined"?!0:i,r=n.split("."),r.length!=3)throw new Error("Wrong number of segments.");if(u=JSON.parse(this.urlsafeB64Decode(r[0])),null===u)throw new Error("Invalid segment encoding");if(f=JSON.parse(this.urlsafeB64Decode(r[1])),null===f)throw new Error("Invalid segment encoding");if(i){if(!u.alg)throw new Error("Empty algorithm");if(this.urlsafeB64Decode(r[2])!=this.sign([r[0],r[1]].join("."),t,u.alg))throw new Error("Signature verification failed");}return f},n.prototype.encode=function(n,t,i){i=i||"HS256";var u={typ:"JWT",alg:i},r=[this.urlsafeB64Encode(JSON.stringify(u)),this.urlsafeB64Encode(JSON.stringify(n))],f=r.join("."),e=this.sign(f,t,i);return r.push(this.urlsafeB64Encode(e)),r.join(".")},n.prototype.sign=function(n,t,i){i=i||"HS256";var r={HS256:"sha256",HS512:"sha512"};if(!r[i])throw new Error("Algorithm not supported");return this.crypto.createHmac(r[i],t).update(n).digest("binary")},n.prototype.urlsafeB64Decode=function(n){return n+=Array(5-n.length%4).join("="),new Buffer(n.replace(/\-/g,"+").replace(/_/g,"/"),"base64").toString("ascii",null,null)},n.prototype.urlsafeB64Encode=function(n){return new Buffer(n,"ascii").toString("base64",null,null).replace(/\+/g,"-").replace(/\//g,"_").split("=")[0]},n}(),t.jwt=i,r=function(){function n(n,t,i,r,u){this.baseUrl="",this.loginToken=n,this.developerId=t,this.developerSecret=i,this.customerAlias=r,this.databaseAlias=u}return n}(),t.loginCredentials=r,u=function(){function n(){this.crypto=require("crypto"),this.uuid=require("node-uuid"),this.nodeJsRequest=require("request"),this.serviceSettings=new t.services.apiServiceCoreSettings}return n.prototype.endsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1},n.prototype.sortQueryStringParamObject=function(n,t,i){var f=[],e,u,r;for(e in n)n.hasOwnProperty(e)&&(u=t?t+"["+e+"]":e,r=n[e],i?typeof r=="undefined"||r==null?f.push({key:u,value:"",output:u+"="}):typeof r=="object"?f.push(this.sortQueryStringParamObject(r,u,i)):(r==null&&(r=""),f.push({key:u,value:r,output:u+"="+encodeURIComponent(r)})):typeof r=="undefined"||r==null?f.push({key:u,value:"",output:u+"="}):typeof r=="object"?f.push(this.sortQueryStringParamObject(r,u,i)):(r==null&&(r=""),f.push({key:u,value:r,output:u+"="+r})));return f.sort(function(n,t){return n.key>t.key?1:n.key<t.key?-1:0})},n.prototype.sign=function(n,i,r,u,f,e,o){var s="SHA256",tt=new Date,l=tt.toISOString(),c,w,b,nt;n["X-VV-RequestDate"]=l;var y=this.sortQueryStringParamObject(r,"",!0),h="",p=[];for(c=0,w=y.length;c<w;++c)p[c]=y[c].output;h=p.join("&"),h.length>0&&(this.endsWith(i,"?")&&(i=i.substring(0,i.length-1)),h="?"+h),b=i+h,s=s||"HS256";var a={RIPEMD160:"ripemd160",SHA1:"sha1",SHA256:"sha256",SHA384:"sha384",SHA512:"sha512",MD5:"md5"},v="",it=e,k="",d=this.uuid.v1(),g="";if(a[s])v="VVA-HMAC-"+s;else throw new Error("Algorithm not supported");this.request=new t.services.httpRequest(b,"region1",u,n,f,this.serviceSettings.util),k=this.signedHeaders();var rt=this.createCanonicalRequest(),ut=v+"\n"+l+"\n"+e+"\n"+this.hexEncodedHash(rt),ft=this.crypto.createHmac(a[s],l).update(d+o).digest("hex");g=this.crypto.createHmac(a[s],ft).update(ut).digest("hex"),nt="Algorithm="+v+", Credential="+it+", SignedHeaders="+k+", Nonce="+d+", Signature="+g,n["X-Authorization"]=nt},n.prototype.createCanonicalRequest=function(){var t=this.request.pathname(),n=[];return n.push(this.request.method),n.push(t.substring(t.indexOf("/api/"))),n.push(this.request.search()),n.push(this.canonicalHeaders()),n.push(this.signedHeaders()),this.request.body!=null&&this.request.body.length>0?n.push(this.hexEncodedHash(this.request.body)):n.push(""),n.join("\n")},n.prototype.canonicalHeaders=function(){var n=[],t;return this.serviceSettings.util.each.call(this,this.request.headers,function(t,i){n.push([t,i])}),n.sort(function(n,t){return n[0].toLowerCase()<t[0].toLowerCase()?-1:1}),t=[],this.serviceSettings.util.arrayEach.call(this,n,function(n){n[0]!=="X-Authorization"&&t.push(n[0].toLowerCase()+":"+this.canonicalHeaderValues(n[1].toString()))}),t.join("\n")},n.prototype.canonicalHeaderValues=function(n){return n.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},n.prototype.signedHeaders=function(){var n=[];return this.serviceSettings.util.each.call(this,this.request.headers,function(t){t=t.toLowerCase(),t!=="X-Authorization"&&n.push(t)}),n.sort().join(";")},n.prototype.hexEncodedHash=function(n){return this.serviceSettings.util.crypto.sha256(n,"hex")},n.prototype.urlsafeB64Decode=function(n){return n+=Array(5-n.length%4).join("="),new Buffer(n.replace(/\-/g,"+").replace(/_/g,"/"),"base64").toString("ascii",null,null)},n.prototype.urlsafeB64Encode=function(n){return new Buffer(n,"ascii").toString("base64",null,null).replace(/\+/g,"-").replace(/\//g,"_").split("=")[0]},n}(),t.requestSigning=u,f=function(){function n(n,t,i,r,u){this.id=n,this.name=t,this.value=i,this.isError=r,this.errorMessage=u}return n}(),t.returnField=f,e=function(){function n(){this.isAuthenticated=!1,this.apiUrl=null,this.baseUrl=null,this.authenticationUrl=null,this.customerAlias=null,this.databaseAlias=null,this.expirationDateUtc=null,this.tokenBase64=null,this.tokenType=0,this.developerId=null,this.developerSecret=null,this.loginToken=null}return n}(),t.sessionToken=e,function(t){var c=function(){function t(){this.VERSION="v1.0.0",this.ServiceInterface={},this.Signers={},this.XML={},this.util=new n.common.services.serviceCoreUtility(this)}return t}(),i,r,u,f,o,s,h,e;t.apiServiceCoreSettings=c,i=function(){function n(n){this._serviceCoreUtil=n}return n.prototype.encode=function(n){return new Buffer(n).toString("base64",null,null)},n.prototype.decode=function(n){return new Buffer(n,"base64").toString(null,null,null)},n}(),t.base64Helper=i,r=function(){function n(n){this._serviceCoreUtil=n}return n.prototype.concat=function(n){for(var r=0,u=0,i=null,t=0;t<n.length;t++)r+=n[t].length;for(i=new Buffer(r),t=0;t<n.length;t++)n[t].copy(i,u),u+=n[t].length;return i},n}(),t.bufferHelper=r,u=function(){function n(n){this.crc32Table=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],this._serviceCoreUtil=n,this.cryptoLib=require("crypto")}return n.prototype.crc32=function(n){var r=this.crc32Table,t=-1,i;for(typeof n=="string"&&(n=new Buffer(n)),i=0;i<n.length;i++)t=t>>>8^r[(t^n[i])&255];return(t^-1)>>>0},n.prototype.hmac=function(n,t,i,r){return i||(i="binary"),r||(r="sha256"),this.cryptoLib.createHmac(r,n).update(t).digest(i)},n.prototype.md5=function(n,t){return t||(t="binary"),typeof n=="string"&&(n=new Buffer(n)),this.createHash("md5").update(n).digest(t)},n.prototype.sha256=function(n,t){return t||(t="binary"),typeof n=="string"&&(n=new Buffer(n)),this.createHash("sha256").update(n).digest(t)},n.prototype.toHex=function(n){for(var i=[],t=0;t<n.length;t++)i.push(("0"+n.charCodeAt(t).toString(16)).substr(-2,2));return i.join("")},n.prototype.createHash=function(n){return this.cryptoLib.createHash(n)},n}(),t.cryptoHelper=u,f=function(){function n(n){this._serviceCoreUtil=n}return n.prototype.getDate=function(){return new Date},n.prototype.iso8601=function(n){return n===undefined&&(n=this.getDate()),n.toISOString()},n.prototype.rfc822=function(n){return n===undefined&&(n=this.getDate()),n.toUTCString()},n.prototype.unixTimestamp=function(n){return n===undefined&&(n=this.getDate()),n.getTime()/1e3},n.prototype.from=function(n){return typeof n=="number"?new Date(n*1e3):new Date(n)},n.prototype.format=function(n,t){return t||(t="iso8601"),this[t](this.from(n))},n}(),t.dateHelper=f,o=function(){function n(n,t){if(typeof n=="undefined"||n===null)throw new Error("Invalid endpoint: "+n);else if(typeof n!="string")return t.copy(n);t.update(this,t.urlParse(n)),this.port=this.port?parseInt(this.port.toString(),10):this.protocol==="https:"?443:80}return n}(),t.endpoint=o,s=function(){function t(t,i,r,u,f,e){t=new n.common.services.endpoint(t,e),this.method=r.toUpperCase(),this.path=t.path||"/",this.headers={};for(var o in u)this.headers[o]=u[o];this.body=f||"",this.endpoint=t,this.region=i}return t.prototype.pathname=function(){return this.path.split("?",1)[0]},t.prototype.search=function(){return this.path.split("?",2)[1]||""},t}(),t.httpRequest=s,h=function(){function n(n){this.abort={},this.serviceCoreSettings=n,this.base64=new i(this),this.buffer=new r(this),this.string=new e(this),this.date=new f(this),this.crypto=new u(this)}return n.prototype.engine=function(){return process.platform+"/"+process.version},n.prototype.userAgent=function(){return"vvclient-nodejs/"+this.serviceCoreSettings.VERSION+" "+this.engine()},n.prototype.uriEscape=function(n){var t=encodeURIComponent(n);return t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape),t.replace(/[*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})},n.prototype.uriEscapePath=function(n){var t=[];return this.arrayEach(n.split("/"),function(n){t.push(this.uriEscape(n))}),t.join("/")},n.prototype.urlParse=function(n){return require("url").parse(n)},n.prototype.queryParamsToString=function(n){var i=[],t=this.serviceCoreSettings.util.uriEscape,r=Object.keys(n).sort();return this.serviceCoreSettings.util.arrayEach(r,function(r){var u=n[r],f=t(r),e=f,o;Array.isArray(u)?(o=[],this.serviceCoreSettings.util.arrayEach(u,function(n){o.push(t(n))}),e=f+"="+o.sort().join("&"+f+"=")):u!==undefined&&u!==null&&(e=f+"="+t(u)),i.push(e)}),i.join("&")},n.prototype.readFileSync=function(n){return require("fs").readFileSync(n,"utf-8")},n.prototype.each=function(n,t){var i,r;for(i in n)if(n.hasOwnProperty(i)&&(r=t.call(this,i,n[i]),r===this.abort))break},n.prototype.arrayEach=function(n,t){var i,r;for(i in n)if(n.hasOwnProperty(i)&&(r=t.call(this,n[i],parseInt(i,10)),r===this.abort))break},n.prototype.update=function(n,t){return this.serviceCoreSettings.util.each(t,function(t,i){n[t]=i}),n},n.prototype.merge=function(n,t){return this.update(this.copy(n),t)},n.prototype.copy=function(n){var t,i;if(n===null||n===undefined)return n;t={};for(i in n)t[i]=n[i];return t},n.prototype.isEmpty=function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},n.prototype.isType=function(n,t){return typeof t=="function"&&(t=t.name),Object.prototype.toString.call(n)==="[object "+t+"]"},n.prototype.error=function(n,t){return n.message=n.message||null,typeof t=="string"?n.message=t:this.update(n,t),n.name=n.code||"Error",n},n.prototype.inherit=function(n,t){var i=null,r;return t===undefined?(t=n,n=Object,i={}):(r=function(){},r.prototype=n.prototype,i=new r),t.constructor===Object&&(t.constructor=function(){if(n!==Object)return n.apply(this,arguments)}),t.constructor.prototype=i,this.serviceCoreSettings.util.update(t.constructor.prototype,t),t.constructor.__super__=n,t.constructor},n.prototype.mixin=function(){for(var i=arguments[0],t,r,n=1;n<arguments.length;n++)for(t in arguments[n].prototype)r=arguments[n].prototype[t],t!="constructor"&&(i.prototype[t]=r);return i},n}(),t.serviceCoreUtility=h,e=function(){function n(n){this._serviceCoreUtil=n}return n.prototype.byteLength=function(n){if(n===null||n===undefined)return 0;if(typeof n=="string"&&(n=new Buffer(n)),n.length!==undefined)return n.length;if(typeof n.path=="string")return require("fs").lstatSync(n.path).size;throw this._serviceCoreUtil.error(new Error,{message:"Cannot determine length of "+n,object:n});},n}(),t.stringHelper=e}(t.services||(t.services={})),s=t.services}(n.common||(n.common={})),t=n.common,function(n){var t=function(){function n(n){this._httpHelper=n}return n.prototype.postEmails=function(n,t){var i=this._httpHelper.getUrl(this._httpHelper._config.ResourceUri.Emails);return this._httpHelper.doVvClientRequest(i,{method:"POST"},n,t)},n}();n.emailManager=t}(n.email||(n.email={})),u=n.email,function(n){var i=function(){function n(n){this._ffColl=n}return n.prototype.getFormFieldByName=function(n){for(var r=n.toLowerCase(),i=null,t=0;t<this._ffColl.length;t++)if(this._ffColl[t].name.toLowerCase()==r){i=this._ffColl[t];break}return i},n.prototype.getFormFieldById=function(n){for(var r=n.toLowerCase(),i=null,t=0;t<this._ffColl.length;t++)if(this._ffColl[t].id.toLowerCase()==r){i=this._ffColl[t];break}return i},n.prototype.getFieldArray=function(){return this._ffColl},n}(),t;n.formFieldCollection=i,t=function(){function n(n){this._httpHelper=n}return n.prototype.getFormTemplates=function(n){var t=this._httpHelper.getUrl(this._httpHelper._config.ResourceUri.FormTemplates);return this._httpHelper.doVvClientRequest(t,{method:"GET"},n,null)},n.prototype.getForms=function(n,t){var i=this._httpHelper._config.ResourceUri.Forms.replace("{id}",t),r=this._httpHelper.getUrl(i);return this._httpHelper.doVvClientRequest(r,{method:"GET"},n,null)},n.prototype.postForms=function(n,t,i){var r=this._httpHelper._config.ResourceUri.Forms.replace("{id}",i),u=this._httpHelper.getUrl(r);return this._httpHelper.doVvClientRequest(u,{method:"POST"},n,t)},n.prototype.postFormRevision=function(n,t,i,r){var u=this._httpHelper._config.ResourceUri.Forms.replace("{id}",i),f=this._httpHelper.getUrl(u+"/"+r);return this._httpHelper.doVvClientRequest(f,{method:"POST"},n,t)},n}(),n.formsManager=t}(n.forms||(n.forms={})),f=n.forms,function(n){var t=function(){function n(n){this._httpHelper=n}return n}();n.groupsManager=t}(n.groups||(n.groups={})),e=n.groups,function(n){var t=function(){function n(n){this._httpHelper=n}return n.prototype.getFolders=function(n){var t=this._httpHelper.getUrl(this._httpHelper._config.ResourceUri.Folders);return this._httpHelper.doVvClientRequest(t,{method:"GET"},n,null)},n.prototype.getDocuments=function(n,t){var i=this._httpHelper._config.ResourceUri.Documents.replace("{id}",t),r=this._httpHelper.getUrl(i);return this._httpHelper.doVvClientRequest(r,{method:"GET"},n,null)},n}();n.libraryManager=t}(n.library||(n.library={})),o=n.library,function(n){var t=function(){function n(n){this._httpHelper=n}return n.prototype.getSites=function(n){var t=this._httpHelper.getUrl(this._httpHelper._config.ResourceUri.Sites);return this._httpHelper.doVvClientRequest(t,{method:"GET"},n,null)},n.prototype.postSites=function(n,t){var i=this._httpHelper._config.ResourceUri.Sites,r=this._httpHelper.getUrl(i);return this._httpHelper.doVvClientRequest(r,{method:"POST"},n,t)},n.prototype.putSites=function(n,t,i){var r=this._httpHelper._config.ResourceUri.Sites,u=this._httpHelper.getUrl(r+"/"+i);return this._httpHelper.doVvClientRequest(u,{method:"PUT"},n,t)},n.prototype.getGroups=function(n,t){var i=this._httpHelper._config.ResourceUri.Groups.replace("{id}",t),r=this._httpHelper.getUrl(i);return this._httpHelper.doVvClientRequest(r,{method:"GET"},n,null)},n.prototype.postGroups=function(n,t,i){var r=this._httpHelper._config.ResourceUri.Groups.replace("{id}",i),u=this._httpHelper.getUrl(r);return this._httpHelper.doVvClientRequest(u,{method:"POST"},n,t)},n.prototype.putGroups=function(n,t,i,r){var u=this._httpHelper._config.ResourceUri.Groups.replace("{id}",i),f=this._httpHelper.getUrl(u+"/"+r);return this._httpHelper.doVvClientRequest(f,{method:"PUT"},n,t)},n}();n.sitesManager=t}(n.sites||(n.sites={})),s=n.sites,function(n){var t=function(){function n(n){this._httpHelper=n}return n.prototype.getUsers=function(n,t){var i=this._httpHelper._config.ResourceUri.Users.replace("{id}",t),r=this._httpHelper.getUrl(i);return this._httpHelper.doVvClientRequest(r,{method:"GET"},n,null)},n.prototype.postUsers=function(n,t,i){var r=this._httpHelper._config.ResourceUri.Users.replace("{id}",i),u=this._httpHelper.getUrl(r);return this._httpHelper.doVvClientRequest(u,{method:"POST"},n,t)},n.prototype.putUsers=function(n,t,i,r){var u=this._httpHelper._config.ResourceUri.Users.replace("{id}",i),f=this._httpHelper.getUrl(u+"/"+r);return this._httpHelper.doVvClientRequest(f,{method:"PUT"},n,t)},n}();n.usersManager=t}(n.users||(n.users={})),h=n.users})(vvRestApi||(vvRestApi={})),module.exports=vvRestApi